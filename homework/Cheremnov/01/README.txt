Сборка:
> g++ sum_by_rows.cpp -o sum_by_rows -std=c++11 -O2
> g++ sum_by_cols.cpp -o sum_by_cols -std=c++11 -O2
Быстродействие двух программ
47625 us - sum_by_rows
872331 us - sum_by_columns
Количество промахов кеша, вычисленных благодаря valgrind
3% - sum_by_rows
30% - sum_by_columns
Выводы:
Компилятор не оптимизирует цикл. Сложение по столбцам работает не локально, и поэтому существенно проигрывает по времени сложению по строками.