Далее компиляция программы происходит следующим образом: g++ sum_by_rows.cpp -o sum_by_rows --std=c++11 -O2
Проведём анализ работы программ:
1. Проведём прогрев процессора, запустив на выполнение одну из тестируемых программ.
2. Сначала несколько раз выполним запуск программы, суммирующеё по строкам, пока результаты (время работы) не стабилизируется
3. Аналогично поступим с программой, суммирующей по столбцам.
4. Получим следующие результаты:
root@dell5470-VirtualBox:/home/relevant.sphere/Advanced programming on C++/01# ./01_by_str
Maxtrix sum :4999999950000000
~108000 us
root@dell5470-VirtualBox:/home/relevant.sphere/Advanced programming on C++/01# ./01_by_row
Maxtrix sum :4999999950000000
~200000 us
5. Видим, что действительно суммирование по столбцам ~2 раз медленнее, чем суммирование по строкам.
6. Понять причину этого можно проанализировать работу программы с помощью утилиты valgrind:
root@dell5470-VirtualBox:/home/relevant.sphere/Advanced programming on C++/01# valgrind --tool=cachegrind ./proga1
...
==3175== D   refs:      2,600,734,334  (1,800,539,320 rd   + 800,195,014 wr)
==3175== D1  misses:       25,016,374  (   12,514,101 rd   +  12,502,273 wr)
==3175== LLd misses:       25,009,864  (   12,508,385 rd   +  12,501,479 wr)
==3175== D1  miss rate:           1.0% (          0.7%     +         1.6%  )
==3175== LLd miss rate:           1.0% (          0.7%     +         1.6%  )
==3175== 
==3175== LL refs:          25,018,295  (   12,516,022 rd   +  12,502,273 wr)

...
root@dell5470-VirtualBox:/home/relevant.sphere/Advanced programming on C++/01# valgrind --tool=cachegrind ./proga2
...
==3180== D   refs:      2,600,734,334  (1,800,539,320 rd   + 800,195,014 wr)
==3180== D1  misses:      112,516,372  (  100,014,099 rd   +  12,502,273 wr)
==3180== LLd misses:       25,019,579  (   12,518,100 rd   +  12,501,479 wr)
==3180== D1  miss rate:           4.3% (          5.6%     +         1.6%  )
==3180== LLd miss rate:           1.0% (          0.7%     +         1.6%  )
==3180== 
==3180== LL refs:         112,518,291  (  100,016,018 rd   +  12,502,273 wr)
...
7. Обращая внимание на строку D1 miss rate (статистика промахов в кэше данных L1), замечаем, что количество промахов при суммировании
по столбцам почти на порядок больше, чем при суммировании по строкам. В следствии этого, возрастает количество обращений в кэши 
более высоких уровней (LL refs), чем и обусловлена разность в скорости работы программ.
